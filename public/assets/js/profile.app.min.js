!function(t){function e(e){for(var a,o,s=e[0],l=e[1],c=e[2],u=0,p=[];u<s.length;u++)o=s[u],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&p.push(i[o][0]),i[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);for(d&&d(e);p.length;)p.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],a=!0,s=1;s<n.length;s++){var l=n[s];0!==i[l]&&(a=!1)}a&&(r.splice(e--,1),t=o(o.s=n[0]))}return t}var a={},i={9:0},r=[];function o(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=a,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var d=l;r.push([697,0,1,2]),n()}({230:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=["$scope","API","$state","$stateParams","popup","$dialog",function(t,e,n,a,i,r){t.filterCategory=function(e){return function(e){var n=t.data.type;return"global_section"==n&&(n="section"),null!=n&&null!=e[n]&&1==e[n]}},e.all("theme_category").getList().then((function(e){t.themes_categories=angular.copy(e)}))}]},231:function(t,e,n){"use strict";angular.module("ui.popup").service("popup_section_list",["API","$templateCache","popup","$rootScope","$controller",function(t,e,a,i,r){this.open=function(e){e=e||{};return a.open({template:n(36),data:e.data,controller:["$scope","$modalInstance",function(n,a){n.basePath=window.basePath;t.service("template/category").getList().then((function(t){var a=e.type||n.current_tab.type||"section";n.categories=function(t,e){var n=[];return $.isArray(t)&&(n=t.filter((function(t){return null!=t[e]&&1==t[e]}))),n}(t,a)})),n.selectTemplate=function(t){a.close(t)},n.selectBlankTemplate=function(t){a.close("blank")},n.filter=function(t){t!=n.category&&(n.category=t,n.loader.reset())};n.loader=new function(){this.items=[],this.busy=!1,this.disabled=!1,this.page=0,this.length=4,this.recordsTotal=1/0,this.nextPage=function(){this.busy||n.current_tab&&(this.busy=!0,t.service("template/nextPage").post({length:this.length,start:0==this.page?0:this.page*this.length},{category:n.category,type:n.current_tab.type||"section",is_global:n.current_tab.is_global}).then(function(t){if(this.recordsTotal=1*t.recordsTotal,t.data&&t.data.length){for(var e in t.data)this.items.push(t.data[e]);this.disabled=this.items.length>=this.recordsTotal}else this.disabled=!0;this.busy=!1,this.disabled=this.disabled||this.busy,this.page++}.bind(this)))},this.reset=function(){this.items=[],this.page=0,this.disabled=!1,this.nextPage()}},n.tabs=[{name:window.t("template_list_popup.my_templates"),type:e.type,is_global:0},{name:window.t("template_list_popup.system_templates"),type:e.type,is_global:1}],n.changeTab=function(t){n.current_tab=n.tabs[t],n.loader.reset()},n.changeTab(0),null!=e.controller&&r(e.controller,{$scope:n,$modalInstance:a})}],size:"lg"})}}])},34:function(t,e,n){"use strict";var a=function(t,e){var n=[];for(var a in t)t.hasOwnProperty(a)&&n.push(t[a]);return e.bases=n,e};window.createModuleDefinition=a,t.exports={createModuleDefinition:a,g_loadModule:function(t,e){var n=e,a=n.keys();for(var i in a){var r=a[i];if(r=="./"+t+".js"){var o=n(r);return o.default?o.default:o()}}if(a["./base.js"])return n("./base.js").default},checkExists:function(t,e){return e.keys().indexOf("./"+t+".js")>=0},findDefinitionType:function(t,e){var n=e,a=(n.keys(),n.keys());for(var i in a){var r=a[i];if(r=="./"+name+".js"){var o=n(r);if(o.default&&o.default==t)return name}}}}},346:function(t,e,n){"use strict";angular.module("template/tabs/uiNavItem.html",[]).run(["$templateCache",function(t){t.put("template/tabs/uiNavItem.html",n(347))}]),angular.module("template/tabs/uiNavSubItem.html",[]).run(["$templateCache",function(t){t.put("template/tabs/uiNavSubItem.html",n(348))}]),angular.module("template/tabs/uiSidenav.html",[]).run(["$templateCache",function(t){t.put("template/tabs/uiSidenav.html",n(349))}]),angular.module("ui.Sidenav",["template/tabs/uiNavItem.html","template/tabs/uiNavSubItem.html","template/tabs/uiSidenav.html"]).controller("uiSidenavController",n(350).default).directive("uiSidenav",n(351).default).controller("uiNavItemController",n(352).default).directive("uiNavItem",n(353).default).directive("uiNavSubitem",n(354).default).directive("uiNavItemHeadingTransclude",n(355).default).directive("uiNavItemContentTransclude",n(356).default).directive("uiNavSubitemTransclude",n(357).default).directive("uiSidenavContent",n(358).default).directive("uiNavItemDynamicContentTransclude",n(359).default)},347:function(t,e){t.exports='<div ng-class="{active: active, disabled: disabled}" class="nav-item">\r\n\t<a href="{{url}}" class="md-button" ui-nav-item-heading-transclude><i class="{{headingIcon}}"></i><span>{{heading}}</span>\r\n\t\t<i class="fa fa-angle-down" ng-if="hasChildMenu && active"></i>\r\n\t</a>\r\n\t<div class="child-items" ui-nav-subitem-transclude>\r\n\t</div>\r\n</div>'},348:function(t,e){t.exports='<div class="nav-suitem">\r\n<a href="#/{{url}}" class="md-button" ng-class="{\'md-primary\': active, disabled: disabled}" ><i class="{{headingIcon}}"></i><span>{{heading}}</span></a>\r\n</div>'},349:function(t,e){t.exports='<section class="sidebar">\r\n<div class="sidebar-menu" ng-transclude></div>\r\n</section>\r\n\r\n'},350:function(t,e,n){"use strict";function a(t,e,n){this.addedLastTab=!1;var a,i=this,r=i.tabs=t.tabs=[];i.refresh=function(){angular.forEach(r,(function(t){i.isActive(t.url.replace(/\//g,"."))&&i.select(t)}));for(var t=!1,e=0;e<r.length;e++)r[e].active&&(t=!0);t||(r[0].active=!0)},n.$on("$stateChangeSuccess",(function(t,e,n,a,r){i.refresh()})),n.$on("$stateChangeStart",(function(e,n,a,i,r){t.currentMenu=function(t){if(null!=t){var e=t.split(".");if(e.length)return e[0]}return t}(n.name)})),i.select=function(t){angular.forEach(r,(function(e){e.active&&e!==t&&(e.active=!1,e.onDeselect())})),t.active&&t.loaded||(void 0!==t.load&&t.load(),t.active=!0,t.loaded=!0,t.onSelect())},i.isActive=function(t){t.length&&"#"==t[0]&&(t=t.substring(1));var n=function(t){var e=[];for(t=t.parent;t;)e.push(t),t=t.parent;return e}(e.$current),a=e.is(t);if(!a)for(var i=0;i<n.length-1;i++)if(n[i].name==t)return!0;return a},i.addTab=function(t,n){if(r.push(t),i.isActive(t.url.replace(/\//g,"."))?i.select(t):t.active&&i.select(t),n){if(""==e.$current.name)return;for(var a=!1,o=0;o<r.length;o++)r[o].active&&(a=!0);a||(r[0].active=!0),this.addedLastTab=!0}},i.removeTab=function(t){var e=r.indexOf(t);if(t.active&&r.length>1&&!a){var n=e==r.length-1?e-1:e+1;i.select(r[n])}r.splice(e,1)},t.$on("$destroy",(function(){a=!0}))}a.$inject=["$scope","$state","$rootScope"],Object.defineProperty(e,"__esModule",{value:!0}),e.default=a},351:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return{restrict:"E",transclude:!0,replace:!0,scope:{type:"@",color:"@"},controller:"uiSidenavController",templateUrl:function(t,e){return e.templateUrl||"template/tabs/uiSidenav.html"},link:function(t,e,n){}}}},352:function(t,e,n){"use strict";function a(t,e,n){t.childItems=[],t.hasChildMenu=!1,this.addChildItem=function(e){t.childItems.push(e)},this.hasChildMenu=function(){t.hasChildMenu=!0}}a.$inject=["$scope","$state","$rootScope"],Object.defineProperty(e,"__esModule",{value:!0}),e.default=a},353:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=["$parse","$controller","communication","$compile","$state",function(t,e,n,a,i){return{require:"^uiSidenav",restrict:"E",replace:!0,templateUrl:"template/tabs/uiNavItem.html",transclude:!0,scope:{active:"=?",heading:"@",headingIcon:"@",onSelect:"&select",onDeselect:"&deselect",url:"@url"},controller:"uiNavItemController",compile:function(e,n,a){return function(e,n,i,r){e.changed=!1,e.$watch("active",(function(t){t&&r.select(e)})),e.disabled=!1,i.disabled&&e.$parent.$watch(t(i.disabled),(function(t){e.disabled=!!t})),e.path=e.url.replace(/\//g,"."),e.select=function(){},r.addTab(e,0==n.next().length),e.$on("$destroy",(function(){r.removeTab(e)})),e.$transcludeFn=a}}}}]},354:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=["$parse","$controller","communication","$compile","$state","$rootScope",function(t,e,n,a,i,r){return{restrict:"E",replace:!0,templateUrl:"template/tabs/uiNavSubItem.html",scope:{active:"=?",heading:"@",headingIcon:"@",onSelect:"&select",onDeselect:"&deselect",url:"@templateUrl"},controller:["$scope",function(t){var e=this;e.isActive=function(t){var e=function(t){var e=[];t=t.parent;for(;t;)e.push(t),t=t.parent;return e}(i.$current),n=i.is(t);if(!n)for(var a=0;a<e.length-1;a++)if(e[a].name==t)return!0;return n},r.$on("$stateChangeSuccess",(function(n,a,i,r,o){t.active=e.isActive(t.url.replace(/\//g,"."))}))}]}}]},355:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return{restrict:"A",require:"^uiNavItem",link:function(t,e,n,a){t.$watch("headingElement",(function(t){t&&(e.html(""),e.append(t))}))}}}},356:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return{restrict:"A",require:"^uiSidenav",link:function(t,e,n,a,i){var r=t.$eval(n.uiNavItemContentTransclude);r.$transcludeFn(r.$parent,(function(t){angular.forEach(t,(function(t){!function(t){return t.tagName&&(t.hasAttribute("tab-heading")||t.hasAttribute("data-tab-heading")||"tab-heading"===t.tagName.toLowerCase()||"data-tab-heading"===t.tagName.toLowerCase())}(t)?!function(t){return t.tagName&&(t.hasAttribute("ui-nav-subitem")||"ui-nav-subitem"===t.tagName.toLowerCase()||"ui-nav-subitem"===t.tagName.toLowerCase())}(t)?e.append(t):(r.childItems=r.childItems||[],r.childItems.push(t)):r.headingElement=t}))}))}}}},357:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return{restrict:"A",require:"^uiNavItem",link:function(t,e,n,a){t.$watch("childItems",(function(t){t&&t.length&&(console.log(t),a.hasChildMenu(),e.html(""),e.append(t))}))}}}},358:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return{controller:["$scope",function(t){this.changed=function(){t.changed=!0,t.tab.changed=!0},this.unchanged=function(){t.changed=!1,t.tab.changed=!1}}],link:function(t,e,n){}}}},359:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return{restrict:"A",require:"^uiSidenav",link:function(t,e,n){var a=t.$eval(n.uiNavItemDynamicContentTransclude);a.$watch("contentElement",(function(t){t&&(e.html(""),e.append(t),a._compile())}))}}}},36:function(t,e){t.exports='<md-dialog rc-drag="md-toolbar" aria-label=" {{(\'builder.template_list_popup.title\')| lang }} " class="md-section-list-popup" flex="80">\r\n\t<form ng-cloak ng-submit="ok()">\r\n\t\t<md-toolbar>\r\n\t\t\t<div class="md-toolbar-tools">\r\n\t\t\t<h2> {{(\'builder.template_list_popup.title\')| lang }} </h2>\r\n\r\n\t\t\t<span flex></span>\r\n\t\t\t<md-button class="md-icon-button" ng-click="$dismiss()">\r\n\t\t\t  <i class="fa fa-times" aria-label="Close dialog"></i>\r\n\t\t\t</md-button>\r\n\t\t\t</div>\r\n\t\t</md-toolbar>\r\n\t\t<md-dialog-content class="scroll-container">\r\n\t\t\t<md-nav-bar md-selected-nav-item="current_tab.name">\r\n\t\t\t\t<md-nav-item md-nav-click="changeTab($index)" name="{{tab.name}}" ng-class="{active: current_tab.id==tab.id }" ng-repeat="tab in tabs">\r\n\t\t\t\t\t<i class="{{tab.icon}}"></i>{{tab.name}}\r\n\t\t\t\t</md-nav-item>\r\n\t\t\t</md-nav-bar>\r\n\t\t\t<div class="md-dialog-content" layout="row">\r\n\t\t\t\t<div flex-xs flex-gt-xs="30">\r\n\t\t\t\t\t<md-sidenav class="filter_theme_nav" md-component-id="sidenav"  md-is-locked-open="$mdMedia(\'gt-md\')" md-whiteframe="4">\r\n\t\t\t\t\t\t<md-toolbar layout="row" class="">\r\n\t\t\t\t\t\t\t<div class="md-toolbar-tools">\r\n\t\t\t\t\t\t\t\t<span>Filter</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</md-toolbar>\r\n\t\t\t\t\t\t<md-divider></md-divider>\r\n\t\t\t\t\t\t<md-content>\r\n\t\t\t\t\t\t<md-list>\r\n\t\t\t\t\t\t\t<md-list-item  ng-click="filter(\'all\')" ng-class="{selected: !category}">\r\n\t\t\t\t\t\t\t\tAll\r\n\t\t\t\t\t\t\t</md-list-item>\r\n\t\t\t\t\t\t\t<md-list-item ng-repeat="cat in categories"  ng-click="filter(cat.id)" ng-class="{selected: category==cat.id}">\r\n\t\t\t\t\t\t\t\t{{cat.title}}\r\n\t\t\t\t\t\t\t</md-list-item>\r\n\t\t\t\t\t\t</md-list>\r\n\t\t\t\t\t\t</md-content>\r\n\t\t\t\t\t</md-sidenav>\r\n\t\t\t\t\t\r\n\t\t\t\t</div>\r\n\t\t\t\t<div flex-xs flex-gt-xs="70">\r\n\t\t\t\t\t<md-toolbar layout="row" class="">\r\n\t\t\t\t\t\t<div class="md-toolbar-tools">\r\n\t\t\t\t\t\t\t<span ng-if="category_name == false">All templates</span>\r\n\t\t\t\t\t\t\t<span ng-if="category_name !== false"{{category_name}}</span>\r\n\t\t\t\t\t\t\t<span ng-if="templates.length">({{templates.length}})</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</md-toolbar>\r\n\t\t\t\t\t<md-content layout-padding md-whiteframe="3" layout="column">\r\n\t\t\t\t\t\t<div layout="row" infinite-scroll=\'loader.nextPage()\' infinite-scroll-container="\'md-dialog-content.scroll-container\'" infinite-scroll-disabled=\'loader.disabled\' infinite-scroll-distance=\'1\' infinite-scroll-listen-for-event="list:filtered" layout-wrap>\r\n\t\t\t\t\t\t\t<div flex-xs flex-gt-xs="50" layout="column">\r\n\t\t\t\t\t\t\t\t<md-card class="template-item">\r\n\t\t\t\t\t\t\t\t\t<div class="card-image">\r\n\t\t\t\t\t\t\t\t\t\t<img src="{{basePath}}/assets/images/noimg.png" class="md-card-image" alt="">\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<md-card-title>\r\n\t\t\t\t\t\t\t\t\t  <md-card-title-text>\r\n\t\t\t\t\t\t\t\t\t\t<span class="md-headline">Blank</span>\r\n\t\t\t\t\t\t\t\t\t  </md-card-title-text>\r\n\t\t\t\t\t\t\t\t\t</md-card-title>\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t<md-card-actions layout="row" layout-align="end center">\r\n\t\t\t\t\t\t\t\t\t  <md-button class="md-raised md-primary" ng-click="selectBlankTemplate()">{{\'builder.template_list_popup.select_template\' | lang}}</md-button>\r\n\t\t\t\t\t\t\t\t\t</md-card-actions>\r\n\t\t\t\t\t\t\t\t</md-card>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div flex-xs flex-gt-xs="50" layout="column" ng-repeat="template in loader.items">\r\n\t\t\t\t\t\t\t\t<md-card class="template-item">\r\n\t\t\t\t\t\t\t\t\t<div class="card-image">\r\n\t\t\t\t\t\t\t\t\t\t<img ng-src="{{template.screenshot_url_nc}}" class="md-card-image" alt="{{template.name}}">\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<md-card-title>\r\n\t\t\t\t\t\t\t\t\t  <md-card-title-text>\r\n\t\t\t\t\t\t\t\t\t\t<span class="md-headline">{{template.name}}</span>\r\n\t\t\t\t\t\t\t\t\t  </md-card-title-text>\r\n\t\t\t\t\t\t\t\t\t</md-card-title>\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t<md-card-actions layout="row" layout-align="end center">\r\n\t\t\t\t\t\t\t\t\t  <md-button class="md-raised md-primary" ng-click="selectTemplate(template)">{{\'builder.template_list_popup.select_template\' | lang}}</md-button>\r\n\t\t\t\t\t\t\t\t\t  <md-button href="{{template.preview_url}}" target="_blank">{{\'builder.template_list_popup.preview_template\' | lang}}</md-button>\r\n\t\t\t\t\t\t\t\t\t</md-card-actions>\r\n\t\t\t\t\t\t\t\t</md-card>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div ng-show=\'loader.busy\'>Loading data...</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</md-content>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</md-dialog-content>\r\n\t\t<md-dialog-actions layout="row">\r\n\t\t\t<span flex></span>\r\n\t\t\t<md-button ng-click="$dismiss()">\r\n\t\t\t {{(\'builder.cancel\')| lang }} \r\n\t\t  </md-button>\r\n\t\t</md-dialog-actions>\r\n\t</form>\r\n</md-dialog>'},360:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n){if(null!=window.routes&&null!=n)for(var i in routes){r(routes[i])}function r(i){a.checkExists(i.controller,n);var r={url:i.url,controller:a.g_loadModule(i.controller,n)};i.templateUrl&&(r.templateUrl=getViewPath(i.templateUrl)),i.template&&(r.template=i.template),i.abstract&&(r.abstract=!0,r.template=r.template||"<ui-view/>",r.controller=["$scope",function(t){}]),t.state(i.name,r),null!=i.redirectTo&&e.when(i.url,i.redirectTo),i.default&&e.otherwise(i.url)}};var a=n(34)},361:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=["$scope","API","$stateParams","$dialog","$controller",function(t,e,a,i,r){t.data={},e.one("template",a.id).get().then((function(e){t.name=e.name,t.data=e})),r(n(230).default,{$scope:t}),t.submit=function(){e.restangularizeElement("",t.data,"template").put().then((function(e){1==e?i.message({title:window.t("record_save_successful_title"),message:window.t("record_save_successful_message")}):t.errors=e}))}}]},362:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=["$scope","popup","$dialog","API",function(t,e,n,a){t.gridInstance={},t.deleteTemplate=function(e){n.confirm({title:window.t("remove_record_title"),message:window.t("remove_record_message")}).result.then((function(n){1==n&&a.one("template",e).remove().then((function(e){1==e?t.gridInstance.instance.reloadData():t.errors=e}))}))},a.all("theme_category").getList().then((function(e){t.themes_categories=angular.copy(e)})),t.cloneTemplate=function(e){a.service("template/clone").get(e).then((function(e){1==e?t.gridInstance.instance.reloadData():t.errors=e}))},t.startUploadTemplate=function(a){var i=t;e.open({name:"upload_template",controller:["$modalInstance","$scope",function(t,e){e.uploaded_templates=[],e.uploaded=!1,e.upload_options={url:getApiPath()+"/template/upload",multi_selection:!0,extensions:["template","zip"],onFileUploaded:function(t){var n=t.file.response.info.result;if($.isArray(n))for(var a in n)e.uploaded_templates.push(n[a]);else e.uploaded_templates.push(n)},onUploadComplete:function(){e.uploaded=!0,i.gridInstance.instance.reloadData()},onError:function(t){var e=t.error;n.message({title:e.message,message:e.response})}}}]})}}]},613:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=["$scope","API","$state","$stateParams",function(t,e,n,a){e.service("user").get("").then((function(e){t.data=e})),t.changePassword=function(){e.service("user/password").post({old_password:t.old_password,new_password:t.new_password}).then((function(e){1==e?(t.changePassword_success=["Password updated."],delete t.changePassword_errors):(t.changePassword_errors=e,delete t.changePassword_success)}))},t.updateUser=function(){e.service("user").post(t.data).then((function(e){1==e?(t.changeInfo_success=["Information updated."],delete t.errors):(t.errors=e,delete t.changeInfo_success)}))}}]},614:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=["$location","$rootScope","$scope","communication",function(t,e,n,a){n.currentMenu="dashboard",n.currentMenuPath=["dashboard"],e.$on("$stateChangeStart",(function(t,e,a,i,r){n.currentMenu=function(t){if(null!=t){var e=t.split(".");if(e.length)return e[0]}return t}(e.name),n.currentMenuPath=function(t){if(null!=t){var e=t.split(".");if(e.length)return e}return[]}(e.name)}))}]},615:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=["$location","$rootScope","$scope","communication",function(t,e,n,a){}];var a=n(0);window.moment=a},616:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=["$scope","communication","$stateParams","popup","$state","$dialog","API",function(t,e,n,a,i,r,o){t.category=0,null!=n.id&&(t.category=n.id),t.data={},t.errors={},t.templates=[];o.service("page").getList().then((function(e){t.pages=e})),t.category_name=!1,o.service("theme_category").getList().then((function(e){var n,a,i;for(var r in t.themes_categories=(n=e,a="page",i=[],$.isArray(n)&&(i=n.filter((function(t){return null!=t[a]&&1==t[a]}))),i),t.themes_categories)t.themes_categories[r].id==t.category&&(t.category_name=t.themes_categories[r].title)})),t.scrollContainer=$("page-container");var s=function(){this.items=[],this.busy=!1,this.disabled=!1,this.page=0,this.length=4,this.recordsTotal=1/0,this.nextPage=function(){this.busy||t.current_tab&&(this.busy=!0,o.service("template/nextPage").post({length:this.length,start:0==this.page?0:this.page*this.length},{category:t.category,type:t.current_tab.type||"page",is_global:t.current_tab.is_global}).then(function(t){if(this.recordsTotal=1*t.recordsTotal,t.data&&t.data.length){for(var e in t.data)this.items.push(t.data[e]);this.disabled=this.items.length>=this.recordsTotal}else this.disabled=!0;this.busy=!1,this.disabled=this.disabled||this.busy,this.page++}.bind(this)))},this.reset=function(){this.items=[],this.page=0,this.disabled=!1,this.nextPage()}};t.filter=function(e){e!=t.category&&(t.category=e,t.loader.reset())},t.loader=new s,t.selectTheme=function(t,e){a.open({name:"add_page",controller:["$scope","$modalInstance","$state",function(e,n,a){e.data={type:1,template:t},e.ok=function(){o.service("page").post(e.data).then((function(t){1==t?(n.close(1),a.go("projects.list",{},{reload:!0})):e.errors=t}))}}]})},t.reloadState=function(t){null!=t?i.go("pages.add_category",{id:t},{reload:!0}):i.go("pages.add",{},{reload:!0})},t.loader=new s,t.tabs=[{name:"System Templates",type:"page",is_global:1},{name:"My Templates",type:"page",is_global:0}],t.changeTab=function(e){t.current_tab=t.tabs[e],t.loader.reset()},t.changeTab(0)}]},617:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=["$location","$rootScope","$scope","communication",function(t,e,n,a){n.submitData=function(){n.buttonDisabled=!0,form.submit()},window.grecaptcha&&grecaptcha.ready((function(){grecaptcha.execute("{{$siteKey}}",{action:"auth"}).then((function(t){console.log("token",t)}))}))}]},697:function(t,e,n){"use strict";var a,i=n(31),r=(a=i)&&a.__esModule?a:{default:a};n(231),n(346);var o=[r.default,"ui.Sidenav"];window.getAnalyticViewPath=function(t,e){return decodeURIComponent(window.analyticviewPath).format2({viewPath:t,site_id:e})},angular.module("admin_app",o).controller("profileController",n(613).default).controller("menuController",n(614).default).controller("searchController",n(615).default).controller("addPageController",n(616).default).controller("loginController",n(617).default).directive("ldWidgets",n(698).default).directive("analyticWidgets",n(699).default).config(n(700).default).run(["$rootScope",function(t){}])},698:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=["$http","$rootScope",function(t,e){return{restrict:"A",scope:{src:"=src"},template:'<div ng-include="include_src"></div>',link:function(t,n,a,i){t.cacheUrl=a.src,t.loadedTime=(new Date).getTime(),t.include_src=window.getAnalyticViewPath(a.src,e.site_id)+"&cache="+t.loadedTime,t.$on("dateChanged",(function(){var n=e.date;if(null!=n&&n.startDate&&n.endDate){var a=n.startDate;moment.isMoment(n.startDate)||(a=moment(n.startDate));var i=n.endDate;moment.isMoment(n.endDate)||(i=moment(n.endDate)),t.include_src=window.getAnalyticViewPath(t.cacheUrl,e.site_id)+"&startDate="+a.format("YYYY-MM-DD")+"&endDate="+i.format("YYYY-MM-DD")+"&cache="+t.loadedTime}}))}}}]},699:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=["$http","$rootScope",function(t,e){return{restrict:"A",scope:{src:"=src"},template:'<div ng-include="include_src"></div>',link:function(t,n,a,i){t.cacheUrl=a.src,t.include_src=window.getPiwikAnalyticViewPath(a.src,e.site_id),t.$on("dateChanged",(function(){var n=e.date;if(null!=n&&n.startDate&&n.endDate){var a=n.startDate;moment.isMoment(n.startDate)||(a=moment(n.startDate));var i=n.endDate;moment.isMoment(n.endDate)||(i=moment(n.endDate)),t.include_src=window.getPiwikAnalyticViewPath(t.cacheUrl,e.site_id)+"&startDate="+a.format("YYYY-MM-DD")+"&endDate="+i.format("YYYY-MM-DD")}}))}}}]},700:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=["$stateProvider","$urlRouterProvider","$mdDateLocaleProvider",function(t,e,i){i.formatDate=function(t){return moment(t).format("YYYY-MM-DD")},n(360).default(t,e,a)}];var a=n(701)},701:function(t,e,n){var a={"./domains/list.js":702,"./integrations/list.js":703,"./login/login.js":617,"./menu.js":614,"./profile.js":613,"./projects/add.js":616,"./projects/analytics.js":704,"./projects/edit.js":705,"./projects/list.js":706,"./search.js":615,"./templates/add.js":707,"./templates/edit.js":708,"./templates/list.js":709};function i(t){var e=r(t);return n(e)}function r(t){if(!n.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}i.keys=function(){return Object.keys(a)},i.resolve=r,t.exports=i,i.id=701},702:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=["$scope","popup","$dialog","API",function(t,e,n,a){t.gridInstance={},t.deleteTemplate=function(e){n.confirm({title:window.t("remove_record_title"),message:window.t("remove_record_message")}).result.then((function(n){1==n&&a.one("domain",e).remove().then((function(e){1==e?t.gridInstance.instance.reloadData():t.errors=e}))}))}}]},703:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=["$scope","API","$dialog","popup","safeApply",function(t,e,n,a,i){t.delete=function(a){n.confirm({title:window.t("delete_integration_title"),message:window.t("delete_integration_message")}).result.then((function(){e.one("integration",t.integrations[a].id).remove().then((function(e){1==e?t.integrations.splice(a,1):n.message({title:"Error",message:e})}))}))}}]},704:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=["$scope","$state","$stateParams","$rootScope","$dialog","API","popup",function(t,e,n,a,i,r,o){a.site_id=n.id,t.site_id=n.id,t.data={startDate:moment().subtract(1,"months"),endDate:moment()},t.data.options={opens:"left",eventHandlers:{"apply.daterangepicker":function(e,n){a.date=t.data.date,a.$broadcast("dateChanged")}}},t.changeData=function(){a.date=t.data,a.$broadcast("dateChanged")},t.setSelectLabel=function(e){t.data.select_label=e},t.clearData=function(){i.confirm({title:window.t("delete_site_analytic"),message:window.t("delete_site_analytic_message")}).result.then((function(){r.service("page/clearAnalytic").post({id:n.id}).then((function(e){t.changeData()}))}))}}]},705:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=["$scope","$state","$stateParams","$rootScope","$dialog","API","popup","popup_section_list",function(t,e,n,a,i,r,o,s){t.site_id=n.id,t.data={},r.one("page",n.id).get().then((function(e){t.data=e}),(function(t){(t.status=404)&&e.go("projects.list",{},{reload:!0})})),t.variants=[],r.service("page").get("variants",{site_id:n.id}).then((function(e){t.variants=e.variants,t.discarded_variants=e.discarded_variants})),t.addVariant=function(){s.open({type:"page"}).result.then((function(e){o.open({name:"add_variant",controller:["$scope","$modalInstance",function(t,a){t.data={name:"newpage",template:e.id||e},t.ok=function(){r.one("page/variants").customPOST({site_id:n.id,data:t.data}).then((function(e){e.id?a.close(e):t.errors=e}))}}]}).result.then((function(e){t.variants.push(e)}))}))},t.cloneVariant=function(e){r.service("page/variants/clone/"+e.id).post({}).then((function(e){t.variants.push(e)}))},t.changeName=function(t){o.open({name:"edit_variant",controller:["$scope","$modalInstance",function(e,n){e.data={name:t.name},e.ok=function(){var a={id:t.id,data:e.data},i=t.id;r.one("page/variants/"+i).customPUT(a).then((function(t){t.id?n.close(t):e.errors=t}))}}]}).result.then((function(e){t.name=e.name}))},t.removeVariant=function(e){if(!(t.variants.length<=1)){var n=t.variants[e].id;r.one("page/variants",n).remove().then((function(n){t.discarded_variants.push(t.variants[e]),t.variants.splice(e,1)}))}},t.restoreVariant=function(e){var n=t.discarded_variants[e].id;r.service("page/variants/restore/"+n).post({}).then((function(n){t.variants.push(n),t.discarded_variants.splice(e,1)}))},t.destroyVariant=function(e){var n=t.discarded_variants[e].id;r.service("page/variants/forceDelete/"+n).post({}).then((function(n){t.discarded_variants.splice(e,1)}))},t.addDomain=function(){var e=t.data.id;o.open({name:"add_domain",controller:["$scope","$modalInstance",function(t,n){t.isNew=!0,t.data={subdomain:1,site_id:e},t.ok=function(e){r.service("page/domain").post(t.data).then((function(a){a.name?n.close(a):null!=a[0]&&(e.name.$setValidity("uniqued",!1),t.error=a[0])}))}}]}).result.then((function(e){t.data.domains=t.data.domains||[],t.data.domains.push(e)}))},t.removeDomain=function(e){var n=t.data.domains[e].id;r.one("page/domain",n).remove().then((function(n){t.data.domains.splice(e,1)}))}}]},706:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=["$scope","API","$dialog","popup","safeApply",function(t,e,n,a,i){e.service("page").getList().then((function(e){t.pages=e})),t.deleteSite=function(a){n.confirm({title:window.t("delete_site_title"),message:window.t("delete_site_message")}).result.then((function(){e.one("page",t.pages[a].id).remove().then((function(e){1==e?t.pages.splice(a,1):n.message({title:"Error",message:e})}))}))}}]},707:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=["$scope","communication","$state","$uploader","API",function(t,e,n,a,i){t.data={},t.isNew=!0,i.all("theme_category").getList().then((function(e){t.themes_categories=angular.copy(e)})),t.submit=function(){i.all("template").post(t.data).then((function(e){1==e?n.go("templates.list",{},{reload:!0}):t.errors=e}))},t.upload=function(){new a({url:getApiPath("uploadTemplate"),multipart_params:t.data,onError:function(t){console.log(t)},onUploadComplete:function(){var t=params.files[0].response.result;e.removeList("templates"),n.go("templates.edit",{id:t},{reload:!0})}}).start()}}]},708:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=["$scope","API","$state","$stateParams","popup","$dialog","$controller",function(t,e,a,i,r,o,s){s(n(361).default,{$scope:t})}]},709:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=["$scope","$controller",function(t,e){e(n(362).default,{$scope:t})}]}});